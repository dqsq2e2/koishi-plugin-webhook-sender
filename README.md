# koishi-plugin-webhook-sender

[![npm](https://img.shields.io/npm/v/koishi-plugin-webhook-sender?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-webhook-sender)

ä¸€ä¸ªç”¨äºæ ¹æ®æŒ‡ä»¤å‘é€Webhookè¯·æ±‚çš„Koishiæ’ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰æŒ‡ä»¤å’Œæ¥å£åœ°å€ï¼Œæ”¯æŒ {QQ} å‚æ•°æ›¿æ¢ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- æ”¯æŒé…ç½®å¤šä¸ªè‡ªå®šä¹‰æŒ‡ä»¤
- æ¯ä¸ªæŒ‡ä»¤å¯ä»¥é…ç½®ç‹¬ç«‹çš„webhookåœ°å€
- æ”¯æŒGETå’ŒPOSTè¯·æ±‚æ–¹æ³•
- æ”¯æŒè‡ªå®šä¹‰è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“
- æ”¯æŒ {QQ} å‚æ•°æ›¿æ¢ï¼ˆè‡ªåŠ¨æ›¿æ¢ä¸ºè§¦å‘ç”¨æˆ·çš„QQå·ï¼‰
- å‚æ•°æ›¿æ¢æ”¯æŒåµŒå¥—åœ¨è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ã€ç”šè‡³URLä¸­çš„ä»»æ„ä½ç½®
- **å¯é…ç½®æˆåŠŸçŠ¶æ€ç **ï¼Œåªæœ‰æŒ‡å®šçŠ¶æ€ç æ‰è®¤ä¸ºè¯·æ±‚æˆåŠŸ
- **å“åº”å‚æ•°æ›¿æ¢**ï¼Œå›å¤æ¶ˆæ¯å¯ä»¥ä½¿ç”¨å“åº”æ•°æ®ä¸­çš„å­—æ®µ
- **å¯é€‰æ‹©æ€§å›å¤**ï¼Œå¯ç‹¬ç«‹æ§åˆ¶æˆåŠŸ/å¤±è´¥æ—¶æ˜¯å¦å›å¤æ¶ˆæ¯
- **è¾“å…¥å‚æ•°æ”¯æŒ**ï¼Œç”¨æˆ·å¯åœ¨æŒ‡ä»¤ä¸­ä¼ å…¥è‡ªå®šä¹‰å‚æ•°
- **é»˜è®¤å‚æ•°æ”¯æŒ**ï¼Œæ”¯æŒ"æŒ‡ä»¤ å‚æ•°"çš„ç®€åŒ–ä½¿ç”¨æ–¹å¼  
- æ”¯æŒå¿…éœ€å‚æ•°å’Œå¯é€‰å‚æ•°ï¼Œå¯è®¾ç½®é»˜è®¤å€¼
- æ”¯æŒä½ç½®å‚æ•°å’Œé€‰é¡¹å‚æ•°ä¸¤ç§è¾“å…¥æ–¹å¼
- **æœºå™¨äººæŒ‡å®šæ”¯æŒ**ï¼Œå¯é…ç½®ä½¿ç”¨ç‰¹å®šå¹³å°æˆ–IDçš„æœºå™¨äººæ‰§è¡ŒæŒ‡ä»¤
- **æ™ºèƒ½è¯·æ±‚å¤´è¿‡æ»¤**ï¼ŒåŒ…å«æœªæä¾›å¯é€‰å‚æ•°çš„è¯·æ±‚å¤´é¡¹ä¼šè¢«è‡ªåŠ¨ç§»é™¤
- æ”¯æŒåµŒå¥—å“åº”æ•°æ®è®¿é—®ï¼ˆå¦‚ `{user.name}`ã€`{data.result.message}`ï¼‰
- å¯é…ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´
- å†…ç½®å¸®åŠ©æŒ‡ä»¤ï¼ŒæŸ¥çœ‹æ‰€æœ‰å¯ç”¨æŒ‡ä»¤
- è¯¦ç»†çš„æ—¥å¿—è®°å½•ï¼Œä¾¿äºè°ƒè¯•

## å®‰è£…

```bash
npm install koishi-plugin-webhook-sender
# æˆ–è€…ä½¿ç”¨yarn
yarn add koishi-plugin-webhook-sender
```

## é…ç½®

æ’ä»¶æ”¯æŒä»¥ä¸‹é…ç½®é¡¹ï¼š

```typescript
{
  "webhooks": [
    {
      "command": "test-api",              // æŒ‡ä»¤åç§°ï¼ˆä¸éœ€è¦/å‰ç¼€ï¼‰
      "description": "æµ‹è¯•APIæ¥å£",        // æŒ‡ä»¤æè¿°
      "url": "https://api.example.com/user/{QQ}",  // webhookåœ°å€ï¼Œæ”¯æŒ{QQ}å‚æ•°
      "method": "POST",                   // è¯·æ±‚æ–¹æ³•ï¼šGETæˆ–POST
      "headers": {                        // è¯·æ±‚å¤´ï¼Œæ”¯æŒ{QQ}å‚æ•°
        "Authorization": "Bearer token",
        "X-User-QQ": "{QQ}",
        "Content-Type": "application/json"
      },
      "body": {                          // è¯·æ±‚ä½“ï¼Œæ”¯æŒ{QQ}å‚æ•°
        "user_id": "{QQ}",
        "action": "test",
        "amount": "{amount}",
        "type": "{type}",
        "data": {
          "qq": "{QQ}",
          "message": "Hello from QQ {QQ}"
        }
      },
      "timeout": 5000,                   // è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      "successCodes": [200, 201],        // æˆåŠŸçŠ¶æ€ç åˆ—è¡¨
      "defaultParameters": [           // é»˜è®¤å‚æ•°é…ç½®ï¼ˆä½ç½®å‚æ•°ï¼‰
        {
          "name": "amount",
          "description": "æ“ä½œé‡‘é¢",
          "required": true
        }
      ],
      "inputParameters": [              // è¾“å…¥å‚æ•°é…ç½®ï¼ˆé€‰é¡¹å‚æ•°ï¼‰
        {
          "name": "type",
          "option": "t",
          "description": "æ“ä½œç±»å‹",
          "required": false,
          "defaultValue": "normal"
        }
      ],
      "platform": "onebot",             // æŒ‡å®šä½¿ç”¨onebotå¹³å°çš„æœºå™¨äºº
      "botId": "123456789",             // æŒ‡å®šä½¿ç”¨IDä¸º123456789çš„æœºå™¨äºº
      "enableSuccessReply": true,        // æ˜¯å¦å¯ç”¨æˆåŠŸå›å¤
      "enableErrorReply": true,          // æ˜¯å¦å¯ç”¨å¤±è´¥å›å¤
      "successMessage": "APIè°ƒç”¨æˆåŠŸï¼ç”¨æˆ·ï¼š{user.name}ï¼Œç§¯åˆ†ï¼š{points}ï¼Œæ“ä½œé‡‘é¢ï¼š{amount}ï¼Œç±»å‹ï¼š{type}",   // æˆåŠŸå›å¤ï¼Œæ”¯æŒå“åº”å‚æ•°å’Œç”¨æˆ·è¾“å…¥å‚æ•°
      "errorMessage": "APIè°ƒç”¨å¤±è´¥ï¼š{error}"        // å¤±è´¥å›å¤ï¼Œæ”¯æŒå“åº”å‚æ•°
    },
    {
      "command": "silent-action",
      "description": "é™é»˜æ“ä½œï¼ˆæ— å›å¤ï¼‰",
      "url": "https://api.example.com/silent",
      "method": "POST",
      "body": {
        "qq": "{QQ}",
        "action": "silent"
      },
      "successCodes": [200, 202],
      "enableSuccessReply": false,       // ä¸å›å¤æˆåŠŸæ¶ˆæ¯
      "enableErrorReply": true           // åªåœ¨å¤±è´¥æ—¶å›å¤
    }
  ],
  "globalTimeout": 5000,                 // å…¨å±€è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  "enableLogging": true                  // æ˜¯å¦å¯ç”¨è¯¦ç»†æ—¥å¿—
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# é»˜è®¤å‚æ•° + é€‰é¡¹å‚æ•°çš„æ··åˆä½¿ç”¨
/test-api 100              # ä½¿ç”¨ä½ç½®å‚æ•°amount=100ï¼Œtypeä½¿ç”¨é»˜è®¤å€¼normal
/test-api 100 -t premium   # ä½ç½®å‚æ•°amount=100ï¼Œé€‰é¡¹å‚æ•°type=premium

# é™é»˜æ“ä½œ
/silent-action             # ä¸ä¼šå›å¤ä»»ä½•æ¶ˆæ¯

# æœºå™¨äººæŒ‡å®šä½¿ç”¨
# æ³¨æ„ï¼šwebhookè¯·æ±‚å’Œå›å¤éƒ½ä¼šé€šè¿‡æŒ‡å®šçš„æœºå™¨äººæ‰§è¡Œ
/test-api 100              # é€šè¿‡onebot:123456789æœºå™¨äººæ‰§è¡Œå’Œå›å¤
```

### é…ç½®è¯´æ˜

- **webhooks**ï¼šwebhooké…ç½®åˆ—è¡¨ï¼Œæ¯ä¸ªé…ç½®åŒ…å«ï¼š
  - **command**ï¼šæŒ‡ä»¤åç§°ï¼Œç”¨æˆ·å°†ä½¿ç”¨è¿™ä¸ªåç§°è§¦å‘webhookï¼ˆä¸éœ€è¦ `/` å‰ç¼€ï¼‰
  - **description**ï¼šæŒ‡ä»¤æè¿°ï¼Œä¼šæ˜¾ç¤ºåœ¨å¸®åŠ©ä¿¡æ¯ä¸­
  - **url**ï¼šwebhookè¯·æ±‚åœ°å€ï¼Œæ”¯æŒ `{QQ}` å‚æ•°æ›¿æ¢
  - **method**ï¼šHTTPè¯·æ±‚æ–¹æ³•ï¼Œæ”¯æŒ `GET` æˆ– `POST`
  - **headers**ï¼šè¯·æ±‚å¤´å¯¹è±¡ï¼Œæ”¯æŒ `{QQ}` å‚æ•°æ›¿æ¢
  - **body**ï¼šè¯·æ±‚ä½“å¯¹è±¡ï¼Œæ”¯æŒ `{QQ}` å‚æ•°æ›¿æ¢
  - **timeout**ï¼šå•ä¸ªè¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  - **successCodes**ï¼šæˆåŠŸçŠ¶æ€ç åˆ—è¡¨ï¼Œé»˜è®¤ä¸º `[200]`
  - **enableSuccessReply**ï¼šæ˜¯å¦å¯ç”¨æˆåŠŸæ—¶çš„å›å¤ï¼Œé»˜è®¤ä¸º `true`
  - **enableErrorReply**ï¼šæ˜¯å¦å¯ç”¨å¤±è´¥æ—¶çš„å›å¤ï¼Œé»˜è®¤ä¸º `true`
  - **successMessage**ï¼šè¯·æ±‚æˆåŠŸæ—¶çš„å›å¤æ¶ˆæ¯ï¼Œæ”¯æŒå“åº”å‚æ•°æ›¿æ¢
  - **errorMessage**ï¼šè¯·æ±‚å¤±è´¥æ—¶çš„å›å¤æ¶ˆæ¯ï¼Œæ”¯æŒå“åº”å‚æ•°æ›¿æ¢
  - **inputParameters**ï¼šè¾“å…¥å‚æ•°é…ç½®åˆ—è¡¨ï¼ˆé€‰é¡¹å½¢å¼ï¼‰ï¼Œæ¯ä¸ªå‚æ•°åŒ…å«ï¼š
    - **name**ï¼šå‚æ•°åç§°ï¼Œç”¨äºåœ¨è¯·æ±‚ä¸­æ›¿æ¢ï¼ˆå¦‚ï¼š`num`ï¼‰
    - **option**ï¼šé€‰é¡¹åç§°ï¼Œç”¨æˆ·è¾“å…¥æ—¶ä½¿ç”¨ï¼ˆå¦‚ï¼š`r`ï¼‰
    - **description**ï¼šå‚æ•°æè¿°
    - **required**ï¼šæ˜¯å¦å¿…éœ€å‚æ•°ï¼Œé»˜è®¤ä¸º `false`
    - **defaultValue**ï¼šé»˜è®¤å€¼
  - **defaultParameters**ï¼šé»˜è®¤å‚æ•°é…ç½®åˆ—è¡¨ï¼ˆä½ç½®å‚æ•°å½¢å¼ï¼‰ï¼Œæ¯ä¸ªå‚æ•°åŒ…å«ï¼š
    - **name**ï¼šå‚æ•°åç§°ï¼Œç”¨äºåœ¨è¯·æ±‚ä¸­æ›¿æ¢ï¼ˆå¦‚ï¼š`parameter`ï¼‰
    - **description**ï¼šå‚æ•°æè¿°
    - **required**ï¼šæ˜¯å¦å¿…éœ€å‚æ•°ï¼Œé»˜è®¤ä¸º `false`
    - **defaultValue**ï¼šé»˜è®¤å€¼
  - **platform**ï¼šæœºå™¨äººå¹³å°ï¼Œæ”¯æŒ `onebot`ã€`kook`ã€`telegram`ã€`discord`ã€`lark`ã€`chronocat`ï¼Œç•™ç©ºåˆ™ä½¿ç”¨è§¦å‘æŒ‡ä»¤çš„æœºå™¨äºº
  - **botId**ï¼šæœºå™¨äººIDï¼Œç”¨äºè·å–æŒ‡å®šçš„Botå¯¹è±¡ï¼Œç•™ç©ºåˆ™ä½¿ç”¨è§¦å‘æŒ‡ä»¤çš„æœºå™¨äºº

- **globalTimeout**ï¼šå…¨å±€é»˜è®¤è¶…æ—¶æ—¶é—´
- **enableLogging**ï¼šæ˜¯å¦å¯ç”¨è¯¦ç»†çš„è¯·æ±‚æ—¥å¿—

### å‚æ•°æ›¿æ¢åŠŸèƒ½

#### {QQ} å‚æ•°æ›¿æ¢

æ’ä»¶ä¼šè‡ªåŠ¨å°†é…ç½®ä¸­çš„ `{QQ}` æ›¿æ¢ä¸ºè§¦å‘æŒ‡ä»¤ç”¨æˆ·çš„QQå·ã€‚å‚æ•°æ›¿æ¢æ”¯æŒï¼š

- URLä¸­çš„å‚æ•°ï¼š`https://api.example.com/user/{QQ}`
- è¯·æ±‚å¤´ä¸­çš„å‚æ•°ï¼š`"X-User-QQ": "{QQ}"`
- è¯·æ±‚ä½“ä¸­çš„å‚æ•°ï¼š`{"user_id": "{QQ}"}`
- åµŒå¥—å¯¹è±¡ä¸­çš„å‚æ•°ï¼š`{"data": {"qq": "{QQ}"}}`
- æ•°ç»„ä¸­çš„å‚æ•°ï¼š`["user", "{QQ}", "data"]`

#### ç”¨æˆ·è¾“å…¥å‚æ•°æ›¿æ¢

æ’ä»¶æ”¯æŒä¸¤ç§å‚æ•°è¾“å…¥æ–¹å¼ï¼š**é€‰é¡¹å‚æ•°**ï¼ˆ-option å½¢å¼ï¼‰å’Œ**é»˜è®¤å‚æ•°**ï¼ˆä½ç½®å‚æ•°å½¢å¼ï¼‰

##### 1. é€‰é¡¹å‚æ•°ï¼ˆinputParametersï¼‰

ä½¿ç”¨ `-é€‰é¡¹` çš„å½¢å¼ä¼ å…¥å‚æ•°ï¼š

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "command": "send-gift",
  "body": {
    "from": "{QQ}",
    "to": "{recipient}",
    "message": "{message}"
  },
  "inputParameters": [
    {
      "name": "message",    // å‚æ•°åç§°ï¼Œç”¨äºæ›¿æ¢ {message}
      "option": "m",        // é€‰é¡¹åç§°ï¼Œç”¨æˆ·ä½¿ç”¨ -m ä¼ å…¥
      "description": "èµ é€ç•™è¨€",
      "required": false,
      "defaultValue": "é€ä½ ä¸€ä»½å°ç¤¼ç‰©"
    }
  ]
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```
/send-gift -m "ç”Ÿæ—¥å¿«ä¹"
```

##### 2. é»˜è®¤å‚æ•°ï¼ˆdefaultParametersï¼‰

ä½¿ç”¨"æŒ‡ä»¤ å‚æ•°"çš„ç®€åŒ–å½¢å¼ï¼ŒæŒ‰ä½ç½®ä¼ å…¥å‚æ•°ï¼š

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "command": "transfer",
  "url": "https://api.example.com/transfer",
  "body": {
    "from_user": "{QQ}",
    "to_user": "{target}",
    "amount": "{amount}",
    "reason": "{reason}"
  },
  "defaultParameters": [
    {
      "name": "target",     // å‚æ•°åç§°ï¼Œç”¨äºæ›¿æ¢ {target}
      "description": "è½¬è´¦ç›®æ ‡ç”¨æˆ·ID",
      "required": true      // å¿…éœ€å‚æ•°
    },
    {
      "name": "amount",
      "description": "è½¬è´¦é‡‘é¢",
      "required": true
    },
    {
      "name": "reason",
      "description": "è½¬è´¦åŸå› ",
      "required": false,
      "defaultValue": "æ— å¤‡æ³¨"  // é»˜è®¤å€¼
    }
  ]
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```
/transfer 123456 100           # ä½¿ç”¨é»˜è®¤åŸå› 
/transfer 123456 100 è¿˜æ¬¾      # æŒ‡å®šåŸå› 
```

##### 3. {parameter} é€šç”¨æ¨¡æ¿

å¯¹äºç®€å•çš„å•å‚æ•°åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨ `{parameter}` é€šç”¨æ¨¡æ¿ï¼š

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "command": "query-user",
  "body": {
    "target_user": "{parameter}",
    "requester": "{QQ}"
  },
  "defaultParameters": [
    {
      "name": "parameter",
      "description": "è¦æŸ¥è¯¢çš„ç”¨æˆ·ID",
      "required": false,
      "defaultValue": "{QQ}"    // é»˜è®¤æŸ¥è¯¢è‡ªå·±
    }
  ]
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```
/query-user              # æŸ¥è¯¢è‡ªå·±
/query-user 123456       # æŸ¥è¯¢æŒ‡å®šç”¨æˆ·
```

##### 4. æ··åˆä½¿ç”¨

å¯ä»¥åŒæ—¶é…ç½®é»˜è®¤å‚æ•°å’Œé€‰é¡¹å‚æ•°ï¼š

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "defaultParameters": [
    {"name": "recipient", "required": true},
    {"name": "gift", "defaultValue": "flower"}
  ],
  "inputParameters": [
    {"name": "message", "option": "m", "defaultValue": "é€ä½ ç¤¼ç‰©"}
  ]
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```
/send-gift 123456                    # ä½¿ç”¨é»˜è®¤ç¤¼ç‰©å’Œç•™è¨€
/send-gift 123456 cake               # æŒ‡å®šç¤¼ç‰©ç±»å‹
/send-gift 123456 cake -m "ç”Ÿæ—¥å¿«ä¹"  # æŒ‡å®šç¤¼ç‰©å’Œç•™è¨€
```

**å‚æ•°ç‰¹æ€§**ï¼š
- **å¿…éœ€å‚æ•°**ï¼šè®¾ç½® `required: true`ï¼Œç”¨æˆ·å¿…é¡»æä¾›
- **å¯é€‰å‚æ•°**ï¼šè®¾ç½® `required: false`ï¼ˆé»˜è®¤ï¼‰ï¼Œç”¨æˆ·å¯é€‰æ‹©æ˜¯å¦æä¾›
- **é»˜è®¤å€¼**ï¼šå¯è®¾ç½® `defaultValue`ï¼Œç”¨æˆ·æœªæä¾›æ—¶ä½¿ç”¨é»˜è®¤å€¼
- **å‚æ•°ä¼˜å…ˆçº§**ï¼šé€‰é¡¹å‚æ•°ä¼˜å…ˆäºé»˜è®¤å‚æ•°
- **å‚æ•°éªŒè¯**ï¼šå¿…éœ€å‚æ•°æœªæä¾›æ—¶ä¼šè¿”å›é”™è¯¯æç¤º

#### å“åº”å‚æ•°æ›¿æ¢

å›å¤æ¶ˆæ¯æ”¯æŒä½¿ç”¨APIå“åº”ä¸­çš„å­—æ®µï¼Œæ’ä»¶ä¼šè‡ªåŠ¨æå–å“åº”æ•°æ®å¹¶æ”¯æŒå‚æ•°æ›¿æ¢ï¼š

**å“åº”æ•°æ®ç¤ºä¾‹**ï¼š
```json
{
  "user": {
    "id": 12345,
    "name": "å¼ ä¸‰",
    "email": "zhangsan@example.com"
  },
  "data": {
    "status": "active",
    "points": 150,
    "result": {
      "message": "æ“ä½œæˆåŠŸ"
    }
  },
  "error": "æœªæ‰¾åˆ°ç»‘å®šè¯¥QQå·çš„ç”¨æˆ·"
}
```

**å¯ç”¨çš„å‚æ•°æ›¿æ¢**ï¼š
- `{user.id}` â†’ `12345`
- `{user.name}` â†’ `å¼ ä¸‰`
- `{user.email}` â†’ `zhangsan@example.com`
- `{data.status}` â†’ `active`
- `{data.points}` â†’ `150`
- `{data.result.message}` â†’ `æ“ä½œæˆåŠŸ`
- `{error}` â†’ `æœªæ‰¾åˆ°ç»‘å®šè¯¥QQå·çš„ç”¨æˆ·`
- `{QQ}` â†’ ç”¨æˆ·çš„QQå·
- `{status}` â†’ HTTPçŠ¶æ€ç 

**æ¶ˆæ¯é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "successMessage": "æŸ¥è¯¢æˆåŠŸï¼ç”¨æˆ·ï¼š{user.name}ï¼Œç§¯åˆ†ï¼š{data.points}",
  "errorMessage": "æŸ¥è¯¢å¤±è´¥ï¼š{error}"
}
```

### çŠ¶æ€ç æ£€æµ‹

å¯ä»¥é…ç½®å¤šä¸ªæˆåŠŸçŠ¶æ€ç ï¼Œåªæœ‰å½“å“åº”çŠ¶æ€ç åœ¨ `successCodes` åˆ—è¡¨ä¸­æ—¶ï¼Œæ‰ä¼šè¢«è®¤ä¸ºæ˜¯æˆåŠŸçš„è¯·æ±‚ï¼š

```json
{
  "successCodes": [200, 201, 202],
  "successMessage": "æ“ä½œæˆåŠŸï¼ŒçŠ¶æ€ç ï¼š{status}",
  "errorMessage": "æ“ä½œå¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š{status}ï¼Œé”™è¯¯ï¼š{error}"
}
```

### å¯é€‰å›å¤æ§åˆ¶

å¯ä»¥ç‹¬ç«‹æ§åˆ¶æˆåŠŸå’Œå¤±è´¥æ—¶æ˜¯å¦å›å¤æ¶ˆæ¯ï¼š

```json
{
  "enableSuccessReply": false,  // æˆåŠŸæ—¶ä¸å›å¤
  "enableErrorReply": true      // å¤±è´¥æ—¶æ‰å›å¤
}
```

### æ™ºèƒ½è¯·æ±‚å¤´è¿‡æ»¤

æ’ä»¶ä¼šè‡ªåŠ¨æ£€æµ‹è¯·æ±‚å¤´ä¸­åŒ…å«çš„å‚æ•°ï¼Œ**å¦‚æœæŸä¸ªè¯·æ±‚å¤´çš„å€¼åŒ…å«æœªæä¾›çš„å¯é€‰å‚æ•°ï¼Œè¯¥è¯·æ±‚å¤´é¡¹å°†è¢«å®Œå…¨ç§»é™¤**ï¼Œä¸ä¼šå‘é€åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚

#### å·¥ä½œåŸç†

1. **å‚æ•°æ£€æµ‹**ï¼šæ‰«ææ¯ä¸ªè¯·æ±‚å¤´çš„å€¼ï¼ŒæŸ¥æ‰¾ `{å‚æ•°å}` æ¨¡å¼
2. **å‚æ•°éªŒè¯**ï¼šæ£€æŸ¥å‚æ•°æ˜¯å¦å·²æä¾›ï¼ˆéç©ºã€énullã€éundefinedï¼‰
3. **æ™ºèƒ½è¿‡æ»¤**ï¼šç§»é™¤åŒ…å«æœªæä¾›å‚æ•°çš„è¯·æ±‚å¤´é¡¹
4. **ä¿ç•™å¤„ç†**ï¼šå¯¹åŒ…å«æ‰€æœ‰å·²æä¾›å‚æ•°çš„è¯·æ±‚å¤´è¿›è¡Œæ­£å¸¸çš„å‚æ•°æ›¿æ¢

#### ç¤ºä¾‹

**é…ç½®**ï¼š
```json
{
  "headers": {
    "Content-Type": "application/json",
    "Authorization": "Bearer your-api-token",
    "X-User-QQ": "{QQ}",
    "X-User-Token": "{token}",
    "X-Reason": "{reason}"
  },
  "inputParameters": [
    {
      "name": "token",
      "option": "t", 
      "description": "ç”¨æˆ·ä»¤ç‰Œ",
      "required": false
    }
  ],
  "defaultParameters": [
    {
      "name": "reason",
      "description": "æ“ä½œåŸå› ",
      "required": false
    }
  ]
}
```

**ä½¿ç”¨åœºæ™¯**ï¼š

1. **ç”¨æˆ·æä¾›äº†æ‰€æœ‰å‚æ•°**ï¼š
   ```bash
   /command -t abc123 "è½¬è´¦æ“ä½œ"
   ```
   **å®é™…å‘é€çš„è¯·æ±‚å¤´**ï¼š
   ```json
   {
     "Content-Type": "application/json",
     "Authorization": "Bearer your-api-token", 
     "X-User-QQ": "123456789",
     "X-User-Token": "abc123",
     "X-Reason": "è½¬è´¦æ“ä½œ"
   }
   ```

2. **ç”¨æˆ·åªæä¾›äº†éƒ¨åˆ†å‚æ•°**ï¼š
   ```bash
   /command "è½¬è´¦æ“ä½œ"
   ```
   **å®é™…å‘é€çš„è¯·æ±‚å¤´**ï¼š
   ```json
   {
     "Content-Type": "application/json",
     "Authorization": "Bearer your-api-token",
     "X-User-QQ": "123456789", 
     "X-Reason": "è½¬è´¦æ“ä½œ"
   }
   ```
   âš ï¸ `X-User-Token` è¢«ç§»é™¤ï¼Œå› ä¸º `{token}` å‚æ•°æœªæä¾›

3. **ç”¨æˆ·æ²¡æœ‰æä¾›ä»»ä½•å¯é€‰å‚æ•°**ï¼š
   ```bash
   /command
   ```
   **å®é™…å‘é€çš„è¯·æ±‚å¤´**ï¼š
   ```json
   {
     "Content-Type": "application/json",
     "Authorization": "Bearer your-api-token",
     "X-User-QQ": "123456789"
   }
   ```
   âš ï¸ `X-User-Token` å’Œ `X-Reason` éƒ½è¢«ç§»é™¤

#### æ—¥å¿—ä¿¡æ¯

å½“æœ‰è¯·æ±‚å¤´è¢«ç§»é™¤æ—¶ï¼Œæ—¥å¿—ä¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼š
```
åŸå§‹è¯·æ±‚å¤´é…ç½® (5é¡¹): {"Content-Type":"application/json",...}
å®é™…å‘é€çš„è¯·æ±‚å¤´ (3é¡¹): {"Content-Type":"application/json",...}
å·²ç§»é™¤ 2 ä¸ªåŒ…å«æœªæä¾›å‚æ•°çš„è¯·æ±‚å¤´é¡¹
```

#### é€‚ç”¨åœºæ™¯

- **APIè®¤è¯**ï¼šæŸäº›APIçš„è®¤è¯å¤´åªåœ¨ç‰¹å®šæƒ…å†µä¸‹éœ€è¦
- **æ¡ä»¶å­—æ®µ**ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥å†³å®šæ˜¯å¦å‘é€æŸäº›å¤´éƒ¨ä¿¡æ¯
- **å¯é€‰å…ƒæ•°æ®**ï¼šé¿å…å‘é€ç©ºå€¼æˆ–æ— æ•ˆçš„å…ƒæ•°æ®å¤´
- **ç¬¬ä¸‰æ–¹å…¼å®¹**ï¼šä¸€äº›ç¬¬ä¸‰æ–¹æœåŠ¡ä¸æ¥å—åŒ…å«å ä½ç¬¦çš„è¯·æ±‚å¤´

### æœºå™¨äººæŒ‡å®šé…ç½®

å¯ä»¥é…ç½®æŒ‡ä»¤ä½¿ç”¨ç‰¹å®šçš„æœºå™¨äººæ¥æ‰§è¡Œwebhookè¯·æ±‚å’Œå‘é€å›å¤ï¼š

#### 1. æŒ‡å®šå¹³å°å’ŒID
```json
{
  "command": "transfer",
  "platform": "onebot",
  "botId": "123456789",
  // ... å…¶ä»–é…ç½®
}
```

#### 2. ä»…æŒ‡å®šå¹³å°
```json
{
  "command": "query-user",
  "platform": "kook",
  // ä½¿ç”¨kookå¹³å°çš„ä»»æ„å¯ç”¨æœºå™¨äºº
}
```

#### 3. ä»…æŒ‡å®šID
```json
{
  "command": "send-gift",
  "botId": "987654321",
  // ä½¿ç”¨IDä¸º987654321çš„ä»»æ„å¹³å°æœºå™¨äºº
}
```

#### 4. è‡ªåŠ¨é€‰æ‹©ï¼ˆé»˜è®¤ï¼‰
```json
{
  "command": "calc",
  // ä¸é…ç½®platformå’ŒbotIdï¼Œä½¿ç”¨è§¦å‘æŒ‡ä»¤çš„æœºå™¨äºº
}
```

**æœºå™¨äººé€‰æ‹©ä¼˜å…ˆçº§**ï¼š
1. **æŒ‡å®šå¹³å°+ID**ï¼šæŸ¥æ‰¾ `platform:botId` çš„ç²¾ç¡®åŒ¹é…
2. **ä»…æŒ‡å®šå¹³å°**ï¼šæŸ¥æ‰¾è¯¥å¹³å°çš„ä»»æ„å¯ç”¨æœºå™¨äºº
3. **ä»…æŒ‡å®šID**ï¼šæŸ¥æ‰¾è¯¥IDçš„ä»»æ„å¹³å°æœºå™¨äºº
4. **å›é€€æœºåˆ¶**ï¼šä½¿ç”¨è§¦å‘æŒ‡ä»¤çš„æœºå™¨äºº

**ä½¿ç”¨åœºæ™¯**ï¼š
- **è·¨å¹³å°æ”¯æŒ**ï¼šQQç¾¤è§¦å‘æŒ‡ä»¤ï¼Œä½¿ç”¨Telegramæœºå™¨äººæ‰§è¡Œ
- **æœºå™¨äººåˆ†å·¥**ï¼šä¸åŒæŒ‡ä»¤ä½¿ç”¨ä¸åŒçš„ä¸“ç”¨æœºå™¨äºº
- **æƒé™éš”ç¦»**ï¼šæ•æ„Ÿæ“ä½œä½¿ç”¨ç‰¹å®šæƒé™çš„æœºå™¨äºº

## ä½¿ç”¨æ–¹æ³•

### 1. é…ç½®æŒ‡ä»¤

åœ¨æ’ä»¶é…ç½®ä¸­æ·»åŠ ä½ éœ€è¦çš„webhooké…ç½®ã€‚æ¯ä¸ªé…ç½®ä¼šè‡ªåŠ¨æ³¨å†Œä¸ºä¸€ä¸ªå¯ç”¨çš„æŒ‡ä»¤ã€‚

### 2. ä½¿ç”¨æŒ‡ä»¤

é…ç½®å®Œæˆåï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨é…ç½®çš„æŒ‡ä»¤åç§°æ¥è§¦å‘webhookè¯·æ±‚ï¼š

**æ— å‚æ•°æŒ‡ä»¤**ï¼š
```
/daily-sign
```

**é»˜è®¤å‚æ•°æŒ‡ä»¤ï¼ˆä½ç½®å‚æ•°ï¼‰**ï¼š
```
/transfer 123456 100                # è½¬è´¦ç»™123456ï¼Œé‡‘é¢100
/transfer 123456 100 è¿˜æ¬¾           # è½¬è´¦ç»™123456ï¼Œé‡‘é¢100ï¼ŒåŸå› "è¿˜æ¬¾"
/query-user 789012                  # æŸ¥è¯¢ç”¨æˆ·789012
/calc "2+3*4"                      # è®¡ç®—è¡¨è¾¾å¼
```

**é€‰é¡¹å‚æ•°æŒ‡ä»¤**ï¼š
```
/send-gift -m "ç”Ÿæ—¥å¿«ä¹"            # å¸¦é€‰é¡¹å‚æ•°
```

**æ··åˆå‚æ•°æŒ‡ä»¤**ï¼š
```
/send-gift 123456 cake -m "ç”Ÿæ—¥å¿«ä¹"  # é»˜è®¤å‚æ•° + é€‰é¡¹å‚æ•°
```

å½“ç”¨æˆ·ï¼ˆå‡è®¾QQå·ä¸º123456ï¼‰æ‰§è¡ŒæŒ‡ä»¤æ—¶ï¼Œæ’ä»¶ä¼šï¼š
1. è§£æä½ç½®å‚æ•°å’Œé€‰é¡¹å‚æ•°
2. å°†é…ç½®ä¸­çš„ `{QQ}` æ›¿æ¢ä¸º `123456`ï¼Œå…¶ä»–å‚æ•°æŒ‰é…ç½®æ›¿æ¢
3. å‘é€HTTPè¯·æ±‚åˆ°æŒ‡å®šçš„webhookåœ°å€
4. è¿”å›æˆåŠŸæˆ–å¤±è´¥çš„æ¶ˆæ¯ç»™ç”¨æˆ·

**å‚æ•°ä½¿ç”¨è§„åˆ™**ï¼š
- **é»˜è®¤å‚æ•°**ï¼šæŒ‰ä½ç½®é¡ºåºä¼ å…¥ï¼Œå¿…éœ€å‚æ•°å¿…é¡»æä¾›
- **é€‰é¡¹å‚æ•°**ï¼šä½¿ç”¨ `-é€‰é¡¹` å½¢å¼ï¼Œå¯ä»»æ„é¡ºåº
- **å‚æ•°ä¼˜å…ˆçº§**ï¼šé€‰é¡¹å‚æ•°ä¼˜å…ˆäºé»˜è®¤å‚æ•°
- **é»˜è®¤å€¼**ï¼šæœªæä¾›çš„å¯é€‰å‚æ•°ä½¿ç”¨é»˜è®¤å€¼

### 3. æŸ¥çœ‹å¯ç”¨æŒ‡ä»¤

ä½¿ç”¨å†…ç½®çš„å¸®åŠ©æŒ‡ä»¤æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„webhookæŒ‡ä»¤ï¼š

```
/webhook-help
```

**å¸®åŠ©æŒ‡ä»¤ç¤ºä¾‹è¾“å‡º**ï¼š
```
å¯ç”¨çš„webhookæŒ‡ä»¤:

/transfer <target> <amount> [reason] - è½¬è´¦æ“ä½œ
  æœºå™¨äºº: onebot:123456789
  ä½ç½®å‚æ•°:
    1. target - è½¬è´¦ç›®æ ‡ç”¨æˆ·ID (å¿…éœ€)
    2. amount - è½¬è´¦é‡‘é¢ (å¿…éœ€)
    3. reason - è½¬è´¦åŸå›  (é»˜è®¤: æ— å¤‡æ³¨)

/query-user [parameter] - æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
  æœºå™¨äºº: kook:è‡ªåŠ¨
  ä½ç½®å‚æ•°:
    1. parameter - è¦æŸ¥è¯¢çš„ç”¨æˆ·ID (é»˜è®¤: {QQ})

/send-gift <recipient> [gift] [count] - å‘é€ç¤¼ç‰©
  æœºå™¨äºº: è‡ªåŠ¨:987654321
  ä½ç½®å‚æ•°:
    1. recipient - ç¤¼ç‰©æ¥æ”¶è€… (å¿…éœ€)
    2. gift - ç¤¼ç‰©ç±»å‹ (é»˜è®¤: flower)
    3. count - æ•°é‡ (é»˜è®¤: 1)
  é€‰é¡¹å‚æ•°:
    -m <message> - èµ é€ç•™è¨€ (é»˜è®¤: é€ä½ ä¸€ä»½å°ç¤¼ç‰©)

/calc <expr> - ç®€å•è®¡ç®—å™¨
  ä½ç½®å‚æ•°:
    1. expr - è®¡ç®—è¡¨è¾¾å¼ (å¿…éœ€)

/kook-notify <content> - Kookå¹³å°é€šçŸ¥
  æœºå™¨äºº: kook:è‡ªåŠ¨
  ä½ç½®å‚æ•°:
    1. content - é€šçŸ¥å†…å®¹ (å¿…éœ€)
```

## ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šæ™ºèƒ½è¯·æ±‚å¤´è¿‡æ»¤åŠŸèƒ½

```json
{
  "webhooks": [
    {
      "command": "transfer",
      "description": "è½¬è´¦æ“ä½œ",
      "url": "https://api.example.com/transfer",
      "method": "POST",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer token",
        "X-User-QQ": "{QQ}",
        "X-User-Token": "{userToken}",
        "X-Operation-Reason": "{reason}"
      },
      "body": {
        "from_user": "{QQ}",
        "to_user": "{target}",
        "amount": "{amount}",
        "reason": "{reason}"
      },
      "defaultParameters": [
        {
          "name": "target",
          "description": "è½¬è´¦ç›®æ ‡ç”¨æˆ·ID",
          "required": true
        },
        {
          "name": "amount", 
          "description": "è½¬è´¦é‡‘é¢",
          "required": true
        },
        {
          "name": "reason",
          "description": "è½¬è´¦åŸå› ",
          "required": false,
          "defaultValue": "æ— å¤‡æ³¨"
        }
      ],
      "inputParameters": [
        {
          "name": "userToken",
          "option": "t",
          "description": "ç”¨æˆ·æˆæƒä»¤ç‰Œï¼ˆå¯é€‰ï¼‰",
          "required": false
        }
      ],
      "platform": "onebot",
      "botId": "123456789",
      "successCodes": [200],
      "successMessage": "ğŸ’° è½¬è´¦æˆåŠŸï¼\nğŸ“¤ è½¬ç»™ï¼š{recipient.name}\nğŸ’µ é‡‘é¢ï¼š{amount}å…ƒ\nğŸ“ åŸå› ï¼š{reason}\nğŸ’³ ä½™é¢ï¼š{balance}å…ƒ",
      "errorMessage": "âŒ è½¬è´¦å¤±è´¥ï¼š{error}"
    }
  ]
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```bash
# ä¸æä¾›å¯é€‰å‚æ•°userToken
/transfer 123456 100
# è¯·æ±‚å¤´ï¼š{"Content-Type":"...","Authorization":"...","X-User-QQ":"123456789","X-Operation-Reason":"æ— å¤‡æ³¨"}
# âš ï¸ X-User-Token è¢«è‡ªåŠ¨ç§»é™¤

# æä¾›reasonä½†ä¸æä¾›userToken  
/transfer 123456 100 è¿˜é’±
# è¯·æ±‚å¤´ï¼š{"Content-Type":"...","Authorization":"...","X-User-QQ":"123456789","X-Operation-Reason":"è¿˜é’±"}
# âš ï¸ X-User-Token è¢«è‡ªåŠ¨ç§»é™¤

# æä¾›æ‰€æœ‰å‚æ•°
/transfer 123456 100 è¿˜é’± -t abc123
# è¯·æ±‚å¤´ï¼š{"Content-Type":"...","Authorization":"...","X-User-QQ":"123456789","X-User-Token":"abc123","X-Operation-Reason":"è¿˜é’±"}
# âœ… æ‰€æœ‰è¯·æ±‚å¤´éƒ½ä¿ç•™
```

**APIå“åº”ç¤ºä¾‹**ï¼š
```json
{
  "recipient": {"name": "å¼ ä¸‰"},
  "amount": "100",
  "reason": "è¿˜é’±",
  "balance": "1500"
}
```

### ç¤ºä¾‹2ï¼š{parameter}é€šç”¨æ¨¡æ¿

```json
{
  "webhooks": [
    {
      "command": "query-user",
      "description": "æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯",
      "url": "https://api.example.com/user/{QQ}/info",
      "method": "GET",
      "body": {
        "target_user": "{parameter}",
        "include_details": "true"
      },
      "defaultParameters": [
        {
          "name": "parameter",
          "description": "è¦æŸ¥è¯¢çš„ç”¨æˆ·ID",
          "required": false,
          "defaultValue": "{QQ}"
        }
      ],
      "successMessage": "ğŸ† æŸ¥è¯¢ç»“æœ\nğŸ‘¤ ç”¨æˆ·ï¼š{user.name}\nğŸ–ï¸ ç­‰çº§ï¼š{user.level}\nğŸ’ ç§¯åˆ†ï¼š{user.points}",
      "errorMessage": "æŸ¥è¯¢å¤±è´¥ï¼š{error}"
    }
  ]
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```
/query-user                     # æŸ¥è¯¢è‡ªå·±
/query-user 123456              # æŸ¥è¯¢æŒ‡å®šç”¨æˆ·
```

**ç‰¹ç‚¹**ï¼š`{parameter}` æ˜¯é€šç”¨å‚æ•°æ¨¡æ¿ï¼Œé€‚åˆå•å‚æ•°åœºæ™¯

### ç¤ºä¾‹3ï¼šæ··åˆå‚æ•°ï¼ˆé»˜è®¤å‚æ•°+é€‰é¡¹å‚æ•°ï¼‰

```json
{
  "webhooks": [
    {
      "command": "send-gift",
      "description": "å‘é€ç¤¼ç‰©",
      "url": "https://api.example.com/gift/send",
      "method": "POST",
      "body": {
        "from": "{QQ}",
        "to": "{recipient}",
        "gift_type": "{gift}",
        "quantity": "{count}",
        "message": "{message}"
      },
      "defaultParameters": [
        {
          "name": "recipient",
          "description": "ç¤¼ç‰©æ¥æ”¶è€…",
          "required": true
        },
        {
          "name": "gift",
          "description": "ç¤¼ç‰©ç±»å‹",
          "required": false,
          "defaultValue": "flower"
        },
        {
          "name": "count",
          "description": "æ•°é‡",
          "required": false,
          "defaultValue": "1"
        }
      ],
      "inputParameters": [
        {
          "name": "message",
          "option": "m",
          "description": "èµ é€ç•™è¨€",
          "required": false,
          "defaultValue": "é€ä½ ä¸€ä»½å°ç¤¼ç‰©"
        }
      ],
      "successMessage": "ğŸ ç¤¼ç‰©å‘é€æˆåŠŸï¼\nğŸ‘¤ æ”¶ä»¶äººï¼š{recipient_name}\nğŸ¨ ç¤¼ç‰©ï¼š{gift} x{count}\nğŸ’Œ ç•™è¨€ï¼š{message}",
      "errorMessage": "å‘é€å¤±è´¥ï¼š{error}"
    }
  ]
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```
/send-gift 123456                    # é»˜è®¤ç¤¼ç‰©å’Œç•™è¨€
/send-gift 123456 cake               # æŒ‡å®šç¤¼ç‰©ç±»å‹
/send-gift 123456 cake 3             # æŒ‡å®šç¤¼ç‰©å’Œæ•°é‡
/send-gift 123456 -m "ç”Ÿæ—¥å¿«ä¹"       # é»˜è®¤ç¤¼ç‰©ï¼Œè‡ªå®šä¹‰ç•™è¨€
/send-gift 123456 cake 3 -m "ç”Ÿæ—¥å¿«ä¹" # å®Œæ•´æŒ‡å®šæ‰€æœ‰å‚æ•°
```

**ç‰¹ç‚¹**ï¼šé»˜è®¤å‚æ•°æŒ‰ä½ç½®ä¼ å…¥ï¼Œé€‰é¡¹å‚æ•°å¯åœ¨ä»»æ„ä½ç½®ä½¿ç”¨

### ç¤ºä¾‹4ï¼šå¿…éœ€å‚æ•°ç¤ºä¾‹

```json
{
  "webhooks": [
    {
      "command": "calc",
      "description": "ç®€å•è®¡ç®—å™¨",
      "url": "https://api.example.com/calculate",
      "method": "POST",
      "body": {
        "expression": "{expr}",
        "user": "{QQ}"
      },
      "defaultParameters": [
        {
          "name": "expr",
          "description": "è®¡ç®—è¡¨è¾¾å¼",
          "required": true
        }
      ],
      "successMessage": "ğŸ§® è®¡ç®—ç»“æœï¼š{expr} = {result}",
      "errorMessage": "âŒ è®¡ç®—å¤±è´¥ï¼š{error}"
    }
  ]
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```
/calc "2+3*4"           # è®¡ç®—è¡¨è¾¾å¼
/calc "(10-2)*3"        # å¸¦æ‹¬å·çš„è¡¨è¾¾å¼
```

**ç‰¹ç‚¹**ï¼šå¿…éœ€å‚æ•°åœ¨æœªæä¾›æ—¶ä¼šè¿”å›é”™è¯¯æç¤º

### ç¤ºä¾‹5ï¼šæœºå™¨äººæŒ‡å®šé…ç½®

```json
{
  "webhooks": [
    {
      "command": "kook-notify",
      "description": "Kookå¹³å°é€šçŸ¥",
      "url": "https://api.example.com/notify",
      "method": "POST",
      "body": {
        "user": "{QQ}",
        "message": "{content}"
      },
      "defaultParameters": [
        {
          "name": "content",
          "description": "é€šçŸ¥å†…å®¹",
          "required": true
        }
      ],
      "platform": "kook",
      "successMessage": "âœ… é€šçŸ¥å·²é€šè¿‡Kookæœºå™¨äººå‘é€",
      "errorMessage": "âŒ é€šçŸ¥å‘é€å¤±è´¥"
    },
    {
      "command": "telegram-alert",
      "description": "Telegramå‘Šè­¦",
      "url": "https://api.example.com/alert",
      "method": "POST",
      "body": {
        "source": "qq-{QQ}",
        "alert_level": "{level}",
        "message": "{msg}"
      },
      "defaultParameters": [
        {
          "name": "level",
          "description": "å‘Šè­¦çº§åˆ«",
          "required": false,
          "defaultValue": "info"
        },
        {
          "name": "msg",
          "description": "å‘Šè­¦æ¶ˆæ¯",
          "required": true
        }
      ],
      "platform": "telegram",
      "botId": "1122334455",
      "successMessage": "ğŸš¨ å‘Šè­¦å·²é€šè¿‡Telegramæœºå™¨äººå‘é€",
      "errorMessage": "âŒ å‘Šè­¦å‘é€å¤±è´¥"
    }
  ]
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```bash
# åœ¨QQç¾¤ä¸­æ‰§è¡Œï¼Œä½†ä½¿ç”¨Kookæœºå™¨äººå¤„ç†
/kook-notify "ç³»ç»Ÿç»´æŠ¤é€šçŸ¥"

# åœ¨ä»»æ„å¹³å°æ‰§è¡Œï¼Œä½¿ç”¨æŒ‡å®šçš„Telegramæœºå™¨äººå¤„ç†
/telegram-alert "æœåŠ¡å™¨å¼‚å¸¸"
/telegram-alert error "æ•°æ®åº“è¿æ¥å¤±è´¥"
```

**ç‰¹ç‚¹**ï¼š
- è·¨å¹³å°æ‰§è¡Œï¼šå¯ä»¥åœ¨QQç¾¤è§¦å‘æŒ‡ä»¤ï¼Œä½†ä½¿ç”¨å…¶ä»–å¹³å°çš„æœºå™¨äºº
- ä¸“ç”¨æœºå™¨äººï¼šä¸åŒç±»å‹çš„æ“ä½œä½¿ç”¨ä¸“é—¨çš„æœºå™¨äºº
- è‡ªåŠ¨å›é€€ï¼šæ‰¾ä¸åˆ°æŒ‡å®šæœºå™¨äººæ—¶è‡ªåŠ¨ä½¿ç”¨è§¦å‘æŒ‡ä»¤çš„æœºå™¨äºº

## æ—¥å¿—å’Œè°ƒè¯•

å½“å¯ç”¨è¯¦ç»†æ—¥å¿—æ—¶ï¼ˆ`enableLogging: true`ï¼‰ï¼Œæ’ä»¶ä¼šè®°å½•ï¼š

- æŒ‡ä»¤è§¦å‘ä¿¡æ¯
- è¯·æ±‚URLã€æ–¹æ³•ã€å¤´ä¿¡æ¯
- è¯·æ±‚ä½“å†…å®¹
- å“åº”çŠ¶æ€ç å’Œæ•°æ®
- é”™è¯¯ä¿¡æ¯

è¿™äº›æ—¥å¿—æœ‰åŠ©äºè°ƒè¯•webhookè¯·æ±‚é—®é¢˜ã€‚

## å¸¸è§é—®é¢˜

1. **æŒ‡ä»¤ä¸ç”Ÿæ•ˆï¼Ÿ**
   - æ£€æŸ¥é…ç½®ä¸­çš„ `command` æ˜¯å¦æ­£ç¡®
   - ç¡®ä¿æ²¡æœ‰é‡å¤çš„æŒ‡ä»¤åç§°
   - æ£€æŸ¥koishiæ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—

2. **{QQ}å‚æ•°æ²¡æœ‰è¢«æ›¿æ¢ï¼Ÿ**
   - ç¡®ä¿ä½¿ç”¨çš„æ˜¯å¤§å†™çš„ `{QQ}`
   - æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æœ‰æ•ˆçš„userId

3. **å“åº”å‚æ•°æ²¡æœ‰è¢«æ›¿æ¢ï¼Ÿ**
   - æ£€æŸ¥APIæ˜¯å¦è¿”å›äº†é¢„æœŸçš„JSONæ•°æ®
   - ç¡®è®¤å‚æ•°åæ‹¼å†™æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
   - å¯¹äºåµŒå¥—å­—æ®µï¼Œä½¿ç”¨ç‚¹å·è¯­æ³•å¦‚ `{user.name}`
   - å¯ç”¨è¯¦ç»†æ—¥å¿—æŸ¥çœ‹å®é™…çš„å“åº”æ•°æ®

4. **è¾“å…¥å‚æ•°ä¸ç”Ÿæ•ˆï¼Ÿ**
   - æ£€æŸ¥ `inputParameters`ï¼ˆé€‰é¡¹å‚æ•°ï¼‰é…ç½®æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤å‚æ•°åï¼ˆ`name`ï¼‰å’Œé€‰é¡¹åï¼ˆ`option`ï¼‰æ‹¼å†™æ­£ç¡®
   - å¿…éœ€å‚æ•°æœªæä¾›æ—¶ä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
   - ä½¿ç”¨ `/webhook-help` æŸ¥çœ‹å…·ä½“å‚æ•°è¯´æ˜

5. **é»˜è®¤å‚æ•°ä¸ç”Ÿæ•ˆï¼Ÿ**
   - æ£€æŸ¥ `defaultParameters`ï¼ˆä½ç½®å‚æ•°ï¼‰é…ç½®æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤å‚æ•°æŒ‰ä½ç½®é¡ºåºä¼ å…¥ï¼ˆç¬¬1ä¸ªå‚æ•°å¯¹åº”ç¬¬1ä¸ªé…ç½®ï¼‰
   - å¿…éœ€å‚æ•°å¿…é¡»æä¾›ï¼Œå¯é€‰å‚æ•°å¯ä»¥çœç•¥
   - å‚æ•°æ•°é‡ä¸èƒ½è¶…è¿‡é…ç½®çš„å‚æ•°ä¸ªæ•°

6. **{parameter}æ¨¡æ¿ä¸å·¥ä½œï¼Ÿ**
   - ç¡®ä¿é…ç½®äº†åä¸º `parameter` çš„é»˜è®¤å‚æ•°
   - æ£€æŸ¥è¯·æ±‚ä½“ä¸­æ˜¯å¦ä½¿ç”¨äº† `{parameter}` æ¨¡æ¿
   - å¯ä»¥è®¾ç½®é»˜è®¤å€¼å¦‚ `{QQ}` å®ç°è‡ªå¼•ç”¨

7. **å¿…éœ€å‚æ•°æŠ¥é”™ï¼Ÿ**
   - ç¡®ä¿æä¾›äº†æ‰€æœ‰ `required: true` çš„å‚æ•°
   - å¯¹äºé»˜è®¤å‚æ•°ï¼ŒæŒ‰ä½ç½®é¡ºåºæä¾›å¿…éœ€å‚æ•°
   - å¯¹äºé€‰é¡¹å‚æ•°ï¼Œæ£€æŸ¥é€‰é¡¹åæ˜¯å¦æ­£ç¡®ï¼ˆå¦‚ `-t` è€Œä¸æ˜¯ `-target`ï¼‰
   - å‚æ•°å€¼ä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²

8. **æœºå™¨äººé…ç½®ä¸ç”Ÿæ•ˆï¼Ÿ**
   - æ£€æŸ¥ `platform` å’Œ `botId` é…ç½®æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤æŒ‡å®šçš„æœºå™¨äººå·²è¿æ¥å¹¶åœ¨çº¿
   - æŸ¥çœ‹æ—¥å¿—ä¸­çš„æœºå™¨äººé€‰æ‹©ä¿¡æ¯
   - æ£€æŸ¥æœºå™¨äººæ˜¯å¦æœ‰è¶³å¤Ÿçš„æƒé™æ‰§è¡Œæ“ä½œ

9. **æ‰¾ä¸åˆ°æŒ‡å®šçš„æœºå™¨äººï¼Ÿ**
   - ç¡®è®¤æœºå™¨äººIDå’Œå¹³å°åç§°æ‹¼å†™æ­£ç¡®
   - æ£€æŸ¥æœºå™¨äººæ˜¯å¦å·²æ­£ç¡®é…ç½®å¹¶å¯åŠ¨
   - æŸ¥çœ‹ Koishi æ§åˆ¶å°ä¸­çš„æœºå™¨äººåˆ—è¡¨
   - ç³»ç»Ÿä¼šè‡ªåŠ¨å›é€€åˆ°è§¦å‘æŒ‡ä»¤çš„æœºå™¨äºº

10. **çŠ¶æ€ç æ£€æµ‹ä¸ç”Ÿæ•ˆï¼Ÿ**
    - ç¡®è®¤ `successCodes` é…ç½®åŒ…å«äº†APIå®é™…è¿”å›çš„çŠ¶æ€ç 
    - æ£€æŸ¥æ—¥å¿—ä¸­æ˜¾ç¤ºçš„å®é™…çŠ¶æ€ç 
    - æ³¨æ„æœ‰äº›APIå¯èƒ½è¿”å›201ã€202ç­‰çŠ¶æ€ç 

11. **ä¸æƒ³æ”¶åˆ°å›å¤æ¶ˆæ¯ï¼Ÿ**
    - è®¾ç½® `enableSuccessReply: false` ç¦ç”¨æˆåŠŸå›å¤
    - è®¾ç½® `enableErrorReply: false` ç¦ç”¨å¤±è´¥å›å¤
    - ä¸¤è€…éƒ½è®¾ç½®ä¸ºfalseå¯å®ç°å®Œå…¨é™é»˜æ“ä½œ

12. **è¯·æ±‚è¶…æ—¶ï¼Ÿ**
    - æ£€æŸ¥ç›®æ ‡URLæ˜¯å¦å¯è¾¾
    - é€‚å½“å¢åŠ  `timeout` é…ç½®
    - æ£€æŸ¥ç½‘ç»œè¿æ¥

13. **è¯·æ±‚å¤´æ²¡æœ‰æŒ‰é¢„æœŸå‘é€ï¼Ÿ**
    - æ£€æŸ¥å‚æ•°æ˜¯å¦æ­£ç¡®æä¾›ï¼ˆéç©ºã€énullã€éundefinedï¼‰
    - æŸ¥çœ‹æ—¥å¿—ä¸­çš„"å·²ç§»é™¤ X ä¸ªåŒ…å«æœªæä¾›å‚æ•°çš„è¯·æ±‚å¤´é¡¹"æç¤º
    - ç¡®è®¤å¯é€‰å‚æ•°çš„é…ç½®æ˜¯å¦æ­£ç¡®
    - è®°ä½ï¼šåŒ…å«æœªæä¾›å‚æ•°çš„è¯·æ±‚å¤´ä¼šè¢«è‡ªåŠ¨ç§»é™¤

14. **å¦‚ä½•ç¦ç”¨æ™ºèƒ½è¯·æ±‚å¤´è¿‡æ»¤ï¼Ÿ**
    - ç¡®ä¿æ‰€æœ‰è¯·æ±‚å¤´ä¸­ä½¿ç”¨çš„å‚æ•°éƒ½æ˜¯å¿…éœ€çš„ï¼ˆ`required: true`ï¼‰
    - æˆ–è€…ç»™æ‰€æœ‰å¯é€‰å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼ˆ`defaultValue`ï¼‰
    - é¿å…åœ¨è¯·æ±‚å¤´ä¸­ä½¿ç”¨å¯é€‰ä¸”æ— é»˜è®¤å€¼çš„å‚æ•°

15. **å¦‚ä½•æµ‹è¯•webhookæ˜¯å¦æ­£å¸¸ï¼Ÿ**
    - å¯ç”¨è¯¦ç»†æ—¥å¿—æŸ¥çœ‹è¯·æ±‚è¯¦æƒ…
    - ä½¿ç”¨ç®€å•çš„æµ‹è¯•æ¥å£ï¼ˆå¦‚httpbin.orgï¼‰è¿›è¡Œæµ‹è¯•
    - æ£€æŸ¥ç›®æ ‡æœåŠ¡çš„æ—¥å¿—
    - å…ˆè®¾ç½®ç®€å•çš„æˆåŠŸ/å¤±è´¥æ¶ˆæ¯ï¼Œç¡®è®¤åŸºæœ¬åŠŸèƒ½æ­£å¸¸åå†æ·»åŠ å‚æ•°æ›¿æ¢
    - ä»æ— å‚æ•°æŒ‡ä»¤å¼€å§‹æµ‹è¯•ï¼Œå†é€æ­¥æ·»åŠ é»˜è®¤å‚æ•°å’Œé€‰é¡¹å‚æ•°
    - æµ‹è¯•æœºå™¨äººé…ç½®æ—¶ï¼Œå…ˆç¡®è®¤æœºå™¨äººåœ¨çº¿çŠ¶æ€
    - æµ‹è¯•æ™ºèƒ½è¯·æ±‚å¤´è¿‡æ»¤æ—¶ï¼Œè§‚å¯Ÿæ—¥å¿—ä¸­çš„è¯·æ±‚å¤´å¯¹æ¯”ä¿¡æ¯

## è®¸å¯è¯

MIT 